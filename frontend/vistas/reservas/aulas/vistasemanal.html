<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <script src="../../../javascript/sesion/authGuard.js"></script>
        <!-- SE CREA EL BASE PATH PARA USAR EN TODOS LOS SCRIPTS, ENLACES Y REDIRECCIONES-->
        <script>const BASE = window.location.origin + "/frontend";</script>
        <script>const API = window.location.origin + "/API";</script>
        <!--
        AÑADE:
            <script src="/ALEX/frontend/javascript/includes.js"></script>
            <script src="/ALEX/frontend/javascript/menu.js"></script>
        QUE GENERAN EL RESTO DE ENLACES DEL HEAD Y EL HEADER, NAV Y FOOTER
        -->
        <script>
            const script1 = document.createElement("script");
            script1.src = BASE + "/javascript/includes.js";
            script1.onload = () => {
                const script2 = document.createElement("script");
                script2.src = BASE + "/javascript/menu.js";
                script2.onload = () => {
                generarPagina("menu", "admin");
                };
                document.head.appendChild(script2);
            };
            document.head.appendChild(script1);
        </script>


        <title>Salón de Actos - IES Bajo Aragón</title>
    </head>
    <body>

        <div id="header"></div>

        <main>
            <script src="../../../assets/daypilot/daypilot-all.min.js"></script>
            <link type="text/css" rel="stylesheet" href="../../../assets/css/calendar_green.css" />  
            
            <div class="container my-4 d-flex flex-column" style="height: 50vh;">
                <div class="row d-flex justify-content-between align-items-center mb-3">
                    <button id="prevWeek"
                            type="button"
                            class="btn btn-outline-secondary rounded-circle d-flex align-items-center justify-content-center p-0 border-0"
                            style="width: 2.5rem; height: 2.5rem;">
                    <i class="bi bi-arrow-left-circle fs-2"></i>
                    </button>
                    <button id="nextWeek"
                            type="button"
                            class="btn btn-outline-secondary rounded-circle d-flex align-items-center justify-content-center p-0 border-0"
                            style="width: 2.5rem; height: 2.5rem;">
                    <i class="bi bi-arrow-right-circle fs-2"></i>
                    </button>


                </div>

                <div id="dp" class="flex-grow-1"></div>
            </div>


<script type="module">
    import { generarEventos } from "/frontend/javascript/reservas/crud.js";

document.addEventListener("DOMContentLoaded", async () => {
    const dp = new DayPilot.Calendar("dp", {
        viewType: "Week",
        theme: "calendar_green",
        startDate: DayPilot.Date.today(),

        locale: "es-es",            // formato europeo
        headerDateFormat: "dd/MM/yyyy",
        weekStarts: 1,

        cellDuration: 5,
        cellHeight: 8, 
        businessBeginsHour: 8,
        businessEndsHour: 22,
        eventDeleteHandling: "Disabled",
        heightSpec: "BusinessHoursNoScroll"

    });

    const eventos = await generarEventos("salon");

    dp.events.list = eventos;
    dp.init();


    // BOTONES SEMANA ANTERIOR Y SIGUIENTE
    document.getElementById("prevWeek").addEventListener("click", () => {
        dp.startDate = dp.startDate.addDays(-7);
        dp.update();
    });

    document.getElementById("nextWeek").addEventListener("click", () => {
        dp.startDate = dp.startDate.addDays(7);
        dp.update();
    });


});



</script>

        </main>
        <footer id="footer"></footer>
    </body>
</html>